---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { ArrowRight, Calendar, User, Tag } from 'lucide-astro';

const posts = (await getCollection('posts')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const formatDate = (date: Date) => {
	return date.toLocaleDateString('zh-CN', {
		year: 'numeric',
		month: 'long',
		day: 'numeric',
	});
};
---

<Layout title="企业级 IT 知识库 | 服务器运维与 AI 部署指南 | 上海皓戴" keywords="服务器维修教程, DeepSeek部署, RAID数据恢复, Dell服务器故障代码">
	<!-- Hero Section -->
	<section class="relative py-20 bg-slate-900 overflow-hidden">
		<div class="absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-blue-900/40 via-slate-900 to-slate-900"></div>
		<div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			<div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-bold uppercase tracking-wider mb-6">
				Technical Knowledge Base
			</div>
			<h1 class="text-4xl md:text-5xl font-bold text-white mb-6">
				企业级 IT 运维<br/>
				<span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">实战指南</span>
			</h1>
			<p class="text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed">
				从 Dell PowerEdge 故障排查到私有化大模型部署，这里汇集了皓戴技术团队 15 年的一线实战经验。
			</p>
		</div>
	</section>

	<!-- Blog List -->
	<section class="py-20 bg-theme-bg min-h-screen">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{posts.map((post) => (
					<article class="flex flex-col bg-theme-surface rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group">
						<a href={`/knowledge/${post.slug}`} class="block aspect-video overflow-hidden bg-slate-100 dark:bg-slate-800 relative">
							{post.data.image && (
								<img 
									src={post.data.image} 
									alt={post.data.title}
									class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
								/>
							)}
							<div class="absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"></div>
						</a>
						<div class="flex-1 p-6 flex flex-col">
							<div class="flex flex-wrap gap-2 mb-4">
								{post.data.tags.map(tag => (
									<span class="px-2 py-1 text-xs font-medium bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 rounded-md">
										#{tag}
									</span>
								))}
							</div>
							<h2 class="text-xl font-bold text-theme-text mb-3 line-clamp-2 group-hover:text-blue-600 transition-colors">
								<a href={`/knowledge/${post.slug}`}>
									{post.data.title}
								</a>
							</h2>
							<p class="text-theme-muted text-sm line-clamp-3 mb-6 flex-1">
								{post.data.description}
							</p>
							<div class="flex items-center justify-between pt-4 border-t border-slate-100 dark:border-slate-800 text-xs text-theme-muted">
								<div class="flex items-center">
									<User class="w-3 h-3 mr-1" />
									{post.data.author}
								</div>
								<div class="flex items-center">
									<Calendar class="w-3 h-3 mr-1" />
									{formatDate(post.data.pubDate)}
								</div>
							</div>
						</div>
					</article>
				))}
			</div>
		</div>
	</section>
</Layout>